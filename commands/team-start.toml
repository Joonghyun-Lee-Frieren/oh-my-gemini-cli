# /omg:team â€” ë©€í‹° ì—ì´ì „íŠ¸ íŒ€ ì‹¤í–‰
# ì‘ì—…ì„ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ ì—ì´ì „íŠ¸ íŒ€ì„ êµ¬ì„±í•˜ê³  ë³‘ë ¬ ì‹¤í–‰í•©ë‹ˆë‹¤.

[command]
name = "omg:team"
description = "ë©€í‹° ì—ì´ì „íŠ¸ íŒ€ì„ êµ¬ì„±í•˜ê³  ì‘ì—…ì„ ë³‘ë ¬ ì‹¤í–‰í•©ë‹ˆë‹¤"

[command.args]
workers = { type = "number", default = 4, description = "ìµœëŒ€ ë™ì‹œ ì‹¤í–‰ ì—ì´ì „íŠ¸ ìˆ˜ (1-6)" }
plan-only = { type = "boolean", default = false, description = "ê³„íš ìˆ˜ë¦½ë§Œ í•˜ê³  ì‹¤í–‰í•˜ì§€ ì•ŠìŒ" }
agents = { type = "string", default = "", description = "ì‚¬ìš©í•  ì—ì´ì „íŠ¸ ì¡°í•© (ì˜ˆ: architect,executor,reviewer)" }
lang = { type = "string", default = "ko", description = "ì¶œë ¥ ì–¸ì–´: ko ë˜ëŠ” en" }
format = { type = "string", default = "compact", description = "ì¶œë ¥ í˜•ì‹: compact ë˜ëŠ” detailed" }
alert-threshold = { type = "number", default = 90, description = "ê²½ê³  ì„ê³„ ìºì‹œ ì ì¤‘ë¥  (%)" }

[prompt]
text = """
ë©€í‹° ì—ì´ì „íŠ¸ íŒ€ì„ êµ¬ì„±í•˜ì—¬ ì‚¬ìš©ìì˜ ì‘ì—…ì„ ë¶„ì„í•˜ê³  ì‹¤í–‰í•´ì£¼ì„¸ìš”.
ì¶œë ¥ ì–¸ì–´ëŠ” `{lang}` ê°’ì„ ë”°ë¥´ì„¸ìš”. (`ko`=í•œêµ­ì–´, `en`=English)
ì¶œë ¥ ë°€ë„ëŠ” `{format}` ê°’ì„ ë”°ë¥´ì„¸ìš”. (`compact`=ì§§ê²Œ, `detailed`=ìì„¸íˆ)

## íŒ€ êµ¬ì„± ì ˆì°¨

### Phase 1: ì‘ì—… ë¶„ì„ (Planner)

ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë¶„ì„í•˜ì—¬ ë‹¤ìŒì„ ê²°ì •í•©ë‹ˆë‹¤:

1. **ì‘ì—… ë³µì¡ë„ í‰ê°€**: ë‹¨ìˆœ(1 Phase), ë³´í†µ(2-3 Phases), ë³µì¡(4+ Phases)
2. **í•„ìš” ì—ì´ì „íŠ¸ ê²°ì •**:
   - ë‹¨ìˆœ: Executor Ã— 1
   - ë³´í†µ: Planner + Executor Ã— 2 + Reviewer
   - ë³µì¡: Architect + Planner + Executor Ã— 3 + Reviewer + Debugger
3. **ì‘ì—… ë¶„í•´**: ì›ìì  í•˜ìœ„ ì‘ì—…ìœ¼ë¡œ ë¶„í•´
4. **ì˜ì¡´ì„± ê·¸ë˜í”„**: ì‘ì—… ê°„ ì„ í›„ ê´€ê³„ ë§¤í•‘
5. **ë³‘ë ¬í™” ê¸°íšŒ**: ë…ë¦½ì  ì‘ì—…ì„ ë³‘ë ¬ ì‹¤í–‰ ê°€ëŠ¥ ê·¸ë£¹ìœ¼ë¡œ ë¶„ë¥˜

### Phase 2: íŒ€ ìƒì„±

ê²°ì •ëœ êµ¬ì„±ì— ë”°ë¼ ì—ì´ì „íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:
- Architect, Planner, Reviewer, Debugger â†’ Gemini 3.1 Pro
- Executor, Quick â†’ Gemini 3.1 Flash
- ìµœëŒ€ ë™ì‹œ ì—ì´ì „íŠ¸: {workers}ê°œ

### Phase 3: íŒŒì´í”„ë¼ì¸ ì‹¤í–‰

1. ì˜ì¡´ì„±ì´ ì—†ëŠ” ì‘ì—…ë¶€í„° ë³‘ë ¬ ì‹œì‘
2. ê° ì—ì´ì „íŠ¸ì˜ ì™„ë£Œë¥¼ ê°ì§€í•˜ì—¬ ë‹¤ìŒ ì‘ì—… í• ë‹¹
3. ì‹¤íŒ¨í•œ ì‘ì—…ì€ ìµœëŒ€ 3íšŒ ì¬ì‹œë„
4. ëª¨ë“  êµ¬í˜„ ì™„ë£Œ í›„ Reviewerê°€ ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰

### Phase 4: ê²°ê³¼ ë³´ê³ 

ì•„ë˜ ë°ì´í„°ë¡œ ì‹¤ì œ ìƒíƒœë¥¼ ìˆ˜ì§‘í•˜ì„¸ìš”:
!{omg status --agents --json}
!{omg status --tasks --json}
!{omg status --cache --json}

```
ğŸ íŒ€ ì‹¤í–‰ ì™„ë£Œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ ì‘ì—…: {total}ê°œ ì¤‘ {done}ê°œ ì™„ë£Œ
ğŸ¤– ì—ì´ì „íŠ¸: {active}/{agents_total} active
â±ï¸ ì†Œìš”: {time} (ìˆœì°¨ ì˜ˆìƒ: {sequential_time})
ğŸ’¾ ìºì‹œ ì ì¤‘ë¥ : {hit_rate}%
ğŸ“ ë³€ê²½ íŒŒì¼: {file_count}ê°œ
```

ë³€ê²½ëœ íŒŒì¼ ëª©ë¡ê³¼ ê° ì—ì´ì „íŠ¸ì˜ ì‘ì—… ê²°ê³¼ë¥¼ ìš”ì•½í•´ì£¼ì„¸ìš”.
ë°ì´í„°ê°€ ë¶€ì¡±í•˜ë©´ ìˆ«ìë¥¼ ì¶”ì¸¡í•˜ì§€ ë§ê³  N/Aë¡œ í‘œê¸°í•˜ì„¸ìš”.

## ê²½ê³  ë¬¸êµ¬ ë¶„ê¸° ê·œì¹™

- `hit_rate < {alert-threshold}`:
  - `{lang}=ko`: "âš ï¸ ê²½ê³ : íŒ€ ì‹¤í–‰ ì¤‘ ìºì‹œ ì ì¤‘ë¥ ì´ ì„ê³„ê°’({alert-threshold}%) ë¯¸ë§Œì…ë‹ˆë‹¤."
  - `{lang}=en`: "âš ï¸ Warning: During team execution, cache hit rate is below threshold ({alert-threshold}%)."
- `hit_rate >= {alert-threshold}`:
  - `{lang}=ko`: "âœ… ì •ìƒ: íŒ€ ì‹¤í–‰ ìºì‹œ ìƒíƒœê°€ ì„ê³„ê°’ ì´ìƒì…ë‹ˆë‹¤."
  - `{lang}=en`: "âœ… Healthy: Team execution cache is above threshold."

## ì¶œë ¥ í…œí”Œë¦¿ (ì–¸ì–´ ì„ íƒí˜•)

{lang}=ko:
```
ğŸ íŒ€ ì‹¤í–‰ ë³´ê³ ì„œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ Tasks: {done}/{total} done, {running} running, {queued} queued, {failed} failed
ğŸ¤– Agents: {active}/{agents_total} active
ğŸ’¾ Cache: {hit_rate}% (ì„ê³„ê°’: {alert-threshold}%)
ğŸ“ Changed files: {file_count}
â±ï¸ Duration: {time}
```

{lang}=en:
```
ğŸ Team Execution Report
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ Tasks: {done}/{total} done, {running} running, {queued} queued, {failed} failed
ğŸ¤– Agents: {active}/{agents_total} active
ğŸ’¾ Cache: {hit_rate}% (threshold: {alert-threshold}%)
ğŸ“ Changed files: {file_count}
â±ï¸ Duration: {time}
```

## ì•ˆì „ ê·œì¹™

- ê°™ì€ íŒŒì¼ì„ ì—¬ëŸ¬ ì—ì´ì „íŠ¸ê°€ ë™ì‹œì— ìˆ˜ì •í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- ì‚­ì œ ì‘ì—…ì€ ì‚¬ìš©ì í™•ì¸ í›„ ì§„í–‰í•©ë‹ˆë‹¤
- ë¹„ìš© ìƒí•œì„ ì´ˆê³¼í•˜ë©´ ìë™ìœ¼ë¡œ ì¼ì‹œ ì¤‘ì§€í•©ë‹ˆë‹¤
- plan-only ëª¨ë“œì—ì„œëŠ” ê³„íšë§Œ ì¶œë ¥í•˜ê³  ì‹¤í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
"""
